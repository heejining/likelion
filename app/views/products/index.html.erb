<body>
  <section class="bg-light" id="portfolio">
    <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h2 class="section-heading text-uppercase"> Products of the day...</h2>
        <!--<h3 class="section-subheading text-muted"> filter </h3>-->
      </div>
    </div>
      <div class="row">
        <% @products.each do |product| %>
          <!--< if product.category == 4 %>-->
            <div class="col-md-3 col-sm-6 portfolio-item" style="padding:0px">
              <a class="portfolio-link" data-toggle="modal" id="product-modal-button-<%= product.id %>" href="#product-modal-<%= product.id%>" data-product-id="@product.id">
                <div class="portfolio-hover">
                  <div class="portfolio-hover-content">
                    <i class="fa fa-plus fa-3x"></i>
                  </div>
                </div>
                <%= image_tag(product.images.url, alt: 'Image', class: "portfolio-img") if product.images? %>
              </a>
              <div class="portfolio-caption">
                <h4><%= product.name %></h4>
                <p class="text-muted"><%= product.user.email %></p>
                <p class="text-muted"><%= Category.find(product.category).name %></p>
              </div>
            </div>
        <% end %>
        </div>
      </div>
    </div>
  </section>
  
  
  <!-- Portfolio Modals -->
  
  <script type="text/javascript">
    $(document).ready(ajustamodal);
    $(window).resize(ajustamodal);
    function ajustamodal() {
      var altura = $(window).height() - 155; //value corresponding to the modal heading + footer
      $(".ativa-scroll").css({"height":altura,"overflow-y":"auto"});
    }
  </script>
  
  <% @products.each do |product| %>
      <div class="portfolio-modal modal fade" id="product-modal-<%= product.id %>" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
              <div class="lr">
                <div class="rl"></div>
              </div>
            </div>
            <div class="container">
              <div class="row">
                <div class="col-lg-8 mx-auto">
                  <div class="modal-body">
                    <div class="modal-body ativa-scroll">
                      <%= image_tag(product.images.url, size: "500x500", alt: 'Image') if product.images? %>
                      <h2 class="text-uppercase"><%= product.name %></h2>
                      <p class="item-intro text-muted"><%= product.description %></p>
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 mx-auto">
                  <div class="modal-body">
                      <ul class="list-inline">
                        <%= Like.count %>
                        <!--< if(Like.present?)%>-->
                          <!--<button id="unlike" onclick="unlike(<= product.id %>)"> Unlike </button>-->
                        <!--< else %>-->
                          <button id="like" onclick="like(<%= product.id %>)">Like</button>
                        <!--< end %>-->
                        <br>
                        <li><%= time_ago_in_words(product.created_at) %></li>
                        <li>User: <%= product.user.email %></li>
                        <li>Category: <%= Category.find(product.category).name %></li>
                      </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
  <% end %>
</body>
    
    <!--<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>-->

    <!-- Plugin JavaScript -->
    <!--<script src="vendor/jquery-easing/jquery.easing.min.js"></script>-->

    <!-- Contact form JavaScript -->
    <!--<script src="js/jqBootstrapValidation.js"></script>-->
    <!--<script src="js/contact_me.js"></script>-->

    <!-- Custom scripts for this template -->
    <!--<script src="js/agency.min.js"></script>-->

    <script>
      function like(id) {
        $.ajax({
          url: "/liked/"+id,
          type: "get"
        })
      }
    </script>
    
<!--<h1>Products</h1>-->

<!--<table>-->
<!--  <thead>-->
<!--    <tr>-->
<!--      <th>User</th>-->
<!--      <th>Title</th>-->
<!--      <th>Likes</th>-->
<!--      <th>Description</th>-->
<!--      <th>Images</th>-->
<!--      <th>Video</th>-->
<!--      <th>Category</th>-->
<!--      <th>Funding</th>-->
<!--      <th>Goal amount</th>-->
<!--      <th>Due date</th>-->
<!--      <th colspan="3"></th>-->
<!--    </tr>-->
<!--  </thead>-->

<!--  <tbody>-->
<!--    <% @products.each do |product| %>-->
<!--      <tr>-->
<!--        <td><%= product.user %></td>-->
<!--        <td><%= product.name %></td>-->
<!--        <td><%= product.likes %></td>-->
<!--        <td><%= product.description %></td>-->
<!--        <td><%= product.images %></td>-->
<!--        <td><%= product.video %></td>-->
<!--        <td><%= product.category %></td>-->
<!--        <td><%= product.funding %></td>-->
<!--        <td><%= product.goal_amount %></td>-->
<!--        <td><%= product.due_date %></td>-->
<!--        <td><%= link_to 'Show', product %></td>-->
<!--        <td><%= link_to 'Edit', edit_product_path(product) %></td>-->
<!--        <td><%= link_to 'Destroy', product, method: :delete, data: { confirm: 'Are you sure?' } %></td>-->
<!--      </tr>-->
<!--    <% end %>-->
<!--  </tbody>-->
<!--</table>-->


<!--<% if user_signed_in? %>-->
<!--  <%= link_to 'Sign out',  destroy_user_session_path, method: 'delete' %>-->
<!--  <%= link_to 'New Product', new_product_path %>-->
<!--<% else %>-->
<!-- <%= link_to 'Sign in', new_user_session_path %>-->
<!-- <%= link_to 'Sign up',  new_user_registration_path %>-->
<!--<% end %>-->


